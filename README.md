# Self-hosted DevOps-инфраструктура (Terraform + Ansible + GitLab CI/CD)

Этот проект демонстрирует реализацию полноценной self-hosted инфраструктуры с использованием современных инструментов и подходов: Infrastructure as Code, автоматизации конфигураций и CI/CD пайплайнов.

## Описание проекта

Проект включает следующие ключевые компоненты:

- **Terraform:**  
  Используется для описания и создания инфраструктуры (например, виртуальных машин) в виде кода. Конфигурация позволяет автоматизированно создавать, обновлять и управлять ресурсами.

- **Ansible:**  
  Автоматизирует конфигурацию серверов, устанавливая необходимые пакеты, настраивая доступ по SSH и проводя другие операции для подготовки окружения к работе.

- **CI/CD Пайплайн:**  
  Автоматизированный пайплайн, реализованный с использованием GitHub Actions (с возможностью расширения до GitLab CI/CD), объединяет этапы проверки кода (lint, тестирование), развертывания инфраструктуры и конфигурации серверов, а также сборки Docker-образа и уведомления об успешном деплое.

- **Контейнеризация с Docker:**  
  Для демонстрации сборки и тестового запуска Docker-образа проект включает этап, где осуществляется сборка образа и его проверка.

## Стек технологий

- **Terraform** – для управления инфраструктурой как кодом.
- **Ansible** – для автоматизации конфигурации серверов.
- **GitHub Actions / GitLab CI/CD** – для организации пайплайнов CI/CD.
- **Docker** – для контейнеризации приложения.
- **Bash** – для написания скриптов автоматизации.

## Структура репозитория

ansible_ci_cd/
├── .github/
│   └── workflows/
├── ansible/
├── terraform/
├── .gitlab-ci.yml
└── README.md

## Предварительные требования

Для локального тестирования и развертывания проекта потребуется:

- **Terraform** (рекомендуемая версия 1.5.0 или выше)
- **Ansible** (рекомендуется версия 2.9+)
- **Docker** (для сборки и проверки образов)
- Доступ к self-hosted GitLab Runner или GitHub Actions (в зависимости от выбранного CI/CD решения)
- Набор секретных переменных (SSH ключи, учетные данные для Docker Registry, токен бота Telegram и chat_id)

## Настройка окружения и переменные

В настройках CI/CD (GitHub Secrets или GitLab CI/CD Variables) необходимо указать следующие секреты:

- `SSH_PRIVATE_KEY` – приватный ключ для доступа к целевому серверу.
- `SSH_PUBLIC_KEY` – публичный ключ для развертывания инфраструктуры (если используется в Terraform).
- `DOCKER_USERNAME` – имя пользователя для входа в Docker Registry.
- `DOCKER_PASSWORD` – пароль или токен для Docker Registry.
- `TELEGRAM_BOT_TOKEN` – токен Telegram-бота для отправки уведомлений.
- `TELEGRAM_CHAT_ID` – идентификатор чата, куда будут отправляться уведомления.

## Как запустить проект

 **Клонирование репозитория:**

   ```bash
   git clone https://github.com/AnastasiaTobokhova/ansible_ci_cd.git
   cd ansible_ci_cd
